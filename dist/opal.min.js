!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Opal",[],t):"object"==typeof exports?exports.Opal=t():e.Opal=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){}var i=n(1),u=r(i),a=n(7),c=r(a);o.createElement=u["default"],o.app=function(e){return new c["default"](e)},e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];return r=r.reduce(i,[]),(0,u.isFunction)(e)?new c["default"]({type:c["default"].Thunk,renderFn:e,attrs:t,children:r,options:e}):(0,u.isObject)(e)?new c["default"]({type:c["default"].Thunk,renderFn:e.render,attrs:t,children:r,options:e}):new c["default"]({type:c["default"].Element,tagName:e,attrs:t,children:r})}function i(e,t){if((0,u.isUndefined)(t))throw new Error("vnode cannot be undefined");var n;return n=(0,u.isString)(t)||(0,u.isNumber)(t)?new c["default"]({type:c["default"].Text,nodeValue:t}):(0,u.isNull)(t)?new c["default"]({type:c["default"].Empty}):Array.isArray(t)?t.reduce(i,[]):t,e.concat(n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var u=n(2),a=n(6),c=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(4);Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(5);Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];o&&console.warn.apply(console,t)}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];o&&console.error.apply(console,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.warn=n,t.error=r;var o="undefined"!=typeof console},function(e,t){"use strict";function n(e){return"string"==typeof e}function r(e){return"number"==typeof e}function o(e){return null===e}function i(e){return"undefined"==typeof e}function u(e){return a(e)||"object"===("undefined"==typeof e?"undefined":h(e))&&!!e}function a(e){return"function"==typeof e}function c(e){return"boolean"==typeof e}function l(e,t){return g.call(e,t)}function s(e){if(!u(e))return[];if(m)return m(e);var t=[];for(var n in e)l(e,n)&&t.push(n);return t}function d(e){for(var t=[],n=s(e),r=0;r<n.length;r++){var o=n[r];l(e,o)&&t.push(e[o])}return t}function f(e,t){if(b(e))for(var n=0;n<e.length;n++)t(e[n],n);else if(u(e))for(var r=s(e),o=0;o<r.length;o++){var i=r[o];t(e[i],i,e)}}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];if(null==e||0===n.length)return e;for(var o=0;o<n.length;o++)for(var u=n[o],a=s(n[o]),c=0;c<a.length;c++){var l=a[c],d=u[l];i(d)||(e[l]=u[l])}return e}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.isString=n,t.isNumber=r,t.isNull=o,t.isUndefined=i,t.isObject=u,t.isFunction=a,t.isBoolean=c,t.has=l,t.getKeys=s,t.getValues=d,t.each=f,t.extend=p;var v=Object.prototype,y=v.toString,m=Object.keys,b=t.isArray=Array.isArray||function(e){return"[object Array]"===y.call(e)},g=v.hasOwnProperty},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),u=(0,i.isUndefined)(Uint32Array)?Array:Uint32Array,a=function(){function e(t){r(this,e),this.bits=new u(Math.ceil(t/32))}return o(e,[{key:"setBit",value:function(t){var n=e.id(t);this.bits[n.p]|=1<<n.r}},{key:"clearBit",value:function(t){var n=e.id(t);this.bits[n.p]&=~(1<<n.r)}},{key:"getBit",value:function(t){var n=e.id(t);return!!(this.bits[n.p]&1<<n.r)}}],[{key:"id",value:function(e){var t=e%32,n=(e-t)/32;return{r:t,p:n}}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t={props:e.attrs,children:e.children},n=void 0;return e.options.render?((0,a.extend)(t,e.options),n=e.renderFn.apply(t)):n=e.renderFn(t),n}function i(e){return e.map(function(e,t){var n=(0,a.isNull)(e)?t:e.key||t;return{key:String(n),item:e,index:t}})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.renderThunk=o,t.groupByKey=i;var a=n(2),c=function(){function e(t){r(this,e),(0,a.extend)(this,{children:[],options:{}},t);var n=t.attrs||{};((0,a.isString)(n.key)||(0,a.isNumber)(n.key))&&(this.key=n.key),delete n.key,this.attrs=n}return u(e,[{key:"isSameType",value:function(e){return this.type===e.type}},{key:"isElement",value:function(){return this.type===e.Element}},{key:"isText",value:function(){return this.type===e.Text}},{key:"isThunk",value:function(){return this.type===e.Thunk}}]),e}();t["default"]=c,c.Text="text",c.Element="element",c.Empty="empty",c.Thunk="thunk"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=n(8),c=r(a),l=n(12),s=r(l),d=n(11),f=n(14),p=r(f),h=n(16),v=n(1),y=r(v),m=function(){function e(t){o(this,e),this.model=t.model,this.render=t.render,this.createStore(t),this.root=t.el&&(0,d.query)(t.el),(0,d.emptyElement)(this.root),this.updateView()}return i(e,[{key:"createStore",value:function(e){var t=this,n=e.update||{};if(!(0,u.isFunction)(n)){n=(0,h.createModelUpdater)(this.enhanceHandler(e.update));var r=(0,h.createActionCreators)((0,u.getKeys)(e.update));this.actions=(0,h.bindActionCreators)(r,this.dispatch.bind(this))}this.store=new p["default"](e.model,n),this.store.subscribe(function(){t.model=t.store.getModel(),t.updateView()})}},{key:"enhanceHandler",value:function(e){var t=this,n={};return(0,u.each)(e,function(e,r){var o=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];return e.apply(t,[].concat(r,[t.actions]))};n[r]=o}),n}},{key:"updateView",value:function(){var e=this._vnode,t=this.render(y["default"]),n=this._elem;n?n=(0,c["default"])(this._elem,e,t):(n=(0,s["default"])(t),(0,d.appendChild)(this.root,n)),this._elem=n,this._vnode=t}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),e}();t["default"]=m},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){if(t===n)return e;if(!(0,m.isUndefined)(t)&&(0,m.isUndefined)(n))return c(t),g.removeChild(e.parentNode,e),e;if(!(0,m.isNull)(t)&&(0,m.isNull)(n)||(0,m.isNull)(t)&&!(0,m.isNull)(n)||!t.isSameType(n))return s(e,t,n);var r=e;return n.isElement()?t.tagName!==n.tagName?r=s(e,t,n):(l(e,t,n),u(e,t,n)):n.isText()?t.nodeValue!==n.nodeValue&&(0,d.setAttribute)(e,"nodeValue",n.nodeValue,t.nodeValue):n.isThunk()&&(r=a(e,t,n)),r}function u(e,t,n){function r(t,n,r,l){switch(t){case o:var s=(0,p["default"])(r.item);g.insertBefore(e,s,g.childNode(e,l));break;case u:var d=g.childNode(e,n.index);i(d,n.item,r.item);break;case a:var h=g.childNode(e,n.index);i(h,n.item,r.item),g.insertBefore(e,h,g.childNode(e,l));break;case c:g.removeChild(e,f[n.index])}}var o=y.CREATE,u=y.UPDATE,a=y.MOVE,c=y.REMOVE,l=(0,h.groupByKey)(t.children),s=(0,h.groupByKey)(n.children),d=function(e){return e.key},f=Array.prototype.slice.call(g.childNodes(e));(0,y["default"])(l,s,r,d)}function a(e,t,n){var r=t.thunkVnode,o=(0,h.renderThunk)(n);return i(e,r,o)}function c(e){e.isThunk()?(e.options.beforeUnmount,c(e.thunkVnode)):e.children&&(0,m.each)(e.children,function(e){return c(e)})}function l(e,t,n){var r=t.attrs,o=n.attrs;for(var i in o)o[i]!==r[i]&&(0,d.setAttribute)(e,i,o[i],r[i]);for(var u in r)(0,m.has)(o,u)||(0,d.removeAttribute)(e,u,r[u])}function s(e,t,n){c(t);var r=(0,p["default"])(n);return g.replaceNode(r,e),r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,t.patchChildren=u;var d=n(9),f=n(12),p=o(f),h=n(6),v=n(13),y=r(v),m=n(2),b=n(11),g=r(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=l["default"][t];if(r&&(0,a.isFunction)(n))return void(0,s.removeEventListener)(e,r,n);switch(t){case"checked":case"disabled":case"selected":e[t]=!1;break;case"innerHTML":case"nodeValue":case"value":e[t]="";break;default:e.removeAttribute(t)}}function i(e,t,n,r){var i=l["default"][t];if(n!==r){if(i)return(0,a.isFunction)(r)&&(0,s.removeEventListener)(e,i,r),void(0,s.addEventListener)(e,i,n);if(!u(n))return void o(e,t,r);switch(t){case"checked":case"disabled":case"innerHTML":case"nodeValue":e[t]=n;break;case"selected":if(e.selected=n,"OPTION"===e.tagName&&e.parentNode){var c=e.parentNode,d=Array.prototype.slice(c.options)||[];c.selectedIndex=d.indexOf(e)}break;case"value":e.value=n;break;default:(0,s.setAttribute)(e,t,n)}}}function u(e){return(0,a.isNumber)(e)||(0,a.isString)(e)?!0:(0,a.isBoolean)(e)?e:!1}Object.defineProperty(t,"__esModule",{value:!0}),t.removeAttribute=o,t.setAttribute=i;var a=n(2),c=n(10),l=r(c),s=n(11)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={onAbort:"abort",onAnimationStart:"animationstart",onAnimationIteration:"animationiteration",onAnimationEnd:"animationend",onBlur:"blur",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onChange:"change",onClick:"click",onContextMenu:"contextmenu",onCopy:"copy",onCut:"cut",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onFocus:"focus",onInput:"input",onInvalid:"invalid",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onLoad:"load",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPaste:"paste",onRateChange:"ratechange",onReset:"reset",onScroll:"scroll",onSeeked:"seeked",onSeeking:"seeking",onSubmit:"submit",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onTransitionEnd:"transitionend",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onVolumeChange:"volumechange",onWaiting:"waiting",onWheel:"wheel"}},function(e,t,n){"use strict";function r(e){if(-1===e.indexOf(":"))return null;var t=e.split(":",1)[0];if((0,g.has)(_,t))return _[t];throw new Error('svg-attribute-namespace: prefix "'+t+'" is not supported by SVG.')}function o(e,t,n){var o=r(t);return o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}function i(e){return(0,g.has)(E,e)}function u(e){return i(e)?document.createElementNS(k.svg,e):document.createElement(e)}function a(e){return document.createTextNode(e)}function c(e,t,n){var r=n;(0,g.isUndefined)(r)&&(r=null),e.insertBefore(t,r)}function l(e,t){e.removeChild(t)}function s(e,t){e.appendChild(t)}function d(e,t){t.parentNode&&t.parentNode.replaceChild(e,t)}function f(e){for(var t=void 0;t=e.firstChild;)e.removeChild(t);return e}function p(e){return(0,g.isString)(e)?document.querySelector(e):e}function h(e){return e.tagName}function v(e,t){return e.childNodes[t]}function y(e){return e.childNodes}function m(e,t,n){e.removeEventListener(t,n)}function b(e,t,n){e.addEventListener(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.namespaceMap=void 0,t.setAttribute=o,t.isSvgElement=i,t.createElement=u,t.createTextNode=a,t.insertBefore=c,t.removeChild=l,t.appendChild=s,t.replaceNode=d,t.emptyElement=f,t.query=p,t.tagName=h,t.childNode=v,t.childNodes=y,t.removeEventListener=m,t.addEventListener=b;var g=n(2),k=t.namespaceMap={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},w="animate,circle,defs,ellipse,g,line,linearGradient,mask,path,pattern,polygon,polyline,radialGradient,rect,stop,svg,text,tspan".split(","),E=w.reduce(function(e,t){return e[t]=!0,e},{}),_={ev:"http://www.w3.org/2001/xml-events",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t;switch(e.type){case d["default"].Element:t=a(e);break;case d["default"].Empty:t=l();break;case d["default"].Text:t=c(e);break;case d["default"].Thunk:t=u(e)}return e.elem=t,t}function u(e){return e.thunkVnode=(0,s.renderThunk)(e),i(e.thunkVnode)}function a(e){var t=e.tagName,n=e.children,r=e.attrs,o=h.createElement(t);for(var u in r)(0,v.setAttribute)(o,u,r[u]);return n.forEach(function(e){(0,f.isNull)(e)||(0,f.isUndefined)(e)||h.appendChild(o,i(e))}),o}function c(e){var t=(0,f.isNumber)(e.nodeValue)||(0,f.isString)(e.nodeValue)?e.nodeValue:"";return h.createTextNode(t)}function l(){return h.createElement("noscript")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(6),d=o(s),f=n(2),p=n(11),h=r(p),v=n(9)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n,r){function o(e,t){return r(e)===r(t)}for(var a=0,p=0,h=e.length-1,v=t.length-1,y=e[a],m=t[p];h>=a&&v>=p&&o(y,m);)n(s,y,m,p),y=e[++a],m=t[++p];if(!(p>v&&a>h)){for(var b=e[h],g=t[v],k=0;h>=a&&v>=p&&o(y,g);)n(d,y,g,h-k+1),y=e[++a],g=t[--v],++k;for(;h>=a&&v>=p&&o(m,b);)n(d,b,m,p),b=e[--h],m=t[++p],--k;for(;h>=a&&v>=p&&o(b,g);)n(s,b,g,v),b=e[--h],g=t[--v];if(a>h)for(;v>=p;)n(l,null,m,p),m=t[++p];else if(p>v)for(;h>=a;)n(f,y),y=e[++a];else{for(var w=0,E=null,_=a-k,M=a,O=new c["default"](h-a),A=i(e,a,h+1,r);v>=p;m=t[++p]){var x=A[r(m)];(0,u.isUndefined)(x)?(n(l,null,m,_++),++w):a!==x?(O.setBit(x-M),n(d,e[x],m,_++)):E=p}null!==E&&(O.setBit(0),n(d,e[a],t[E],E));for(var N=e.length-t.length+w,T=0;N>T;y=e[++a])O.getBit(a-M)||(n(f,y),++T)}}}function i(e,t,n,r){for(var o={},i=t;n>i;++i)o[r(e[i])]=i;return o}Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVE=t.MOVE=t.UPDATE=t.CREATE=void 0;var u=n(2),a=n(5),c=r(a),l=0,s=1,d=2,f=3;t["default"]=o,t.CREATE=l,t.UPDATE=s,t.MOVE=d,t.REMOVE=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=r(o);t["default"]=i["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),u=function(){function e(t,n){r(this,e),this.model=t,this.modelUpdater=n,this.listeners=[]}return o(e,[{key:"getModel",value:function(){return this.model}},{key:"dispatch",value:function(e){var t=this.modelUpdater,n=this.model;this.model=t(n,e),this.listeners.forEach(function(e){e()})}},{key:"subscribe",value:function(e){if(!(0,i.isFunction)(e))throw new Error("Invalid argument: listener needs to be a function");var t=this.listeners;return t.push(e),function(){var n=t.indexOf(e);n>=0&&t.splice(n,1)}}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if(!(0,l.isObject)(e)||(0,l.isNull)(e))throw Error("actions must be an object");for(var n={},r=(0,l.getKeys)(e),i=0;i<r.length;i++){var u=r[i];n[u]=o(e[u],t)}return n}function u(e){return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return{type:e,params:n}}}function a(e){var t={};return(0,l.each)(e,function(e){if((0,l.has)(t,e))throw new Error("Duplicated action type found in"+e);t[e]=u(e)}),t}function c(e){return function(t,n){var o=t;if((0,l.has)(e,n.type)){var i=e[n.type];o=i.apply(void 0,r(n.params).concat([t]))}return o}}Object.defineProperty(t,"__esModule",{value:!0}),t.bindActionCreator=o,t.bindActionCreators=i,t.createActionCreator=u,t.createActionCreators=a,t.createModelUpdater=c;var l=n(2)}])});